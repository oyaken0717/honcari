<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Honcari -気軽に本をどこへでも-</title>
<!-- Style CSS -->
<link href="../static/css/bootstrap.css" th:href="@{/css/bootstrap.css}" rel="stylesheet">
<link rel="stylesheet" href="../static/css/style.css" th:href="@{/css/style.css}">
</head>
<body>
<header>
	<nav th:replace="header::frag_header"></nav>
</header>

<!-- page content -->
<div class="container">
	<div class="row">
		<div class="w-100 mx-auto">
			<h1 class="my-4">レンタル履歴</h1>
			
			<!-- side bar -->
			<div th:replace="mypage_side_menu::frag_mypage_side_menu(4)"></div>
			
			<!-- main content -->
			<div class="py-5 book-detail-wrapper">
				<div class="container">
					<!-- タブ・メニュー -->
					<ul class="nav nav-tabs nav-justified justify-content-center">
						<li class="nav-item">
							<a class="nav-link text-dark" href="#borrowing-list" data-toggle="tab">借りた本</a>
						</li>
						<li class="nav-item">
							<a class="nav-link text-dark" href="#lending-list" data-toggle="tab">貸した本</a>
						</li>
					</ul>
					<!-- タブ・コンテント -->
					<div class="tab-content">
						<div class="tab-pane active" id="borrowing-list" >
							<!-- 借りた本 -->
							<div class="pt-3 pb-3 mt-4 mb-4 border-bottom">
								<div th:if="${borrowedList.size()}==0"><p class="text-center">借りた本はありません</p></div>
								<div class="mt-3 mb-3" th:each="borrowedBook:${borrowedList}">
									<div class="row">
										<div class="col-lg-6">
											<img th:src="@{${bookBorrowing.book.thumbnailPath}}" 
												class="rounded img-fluid mx-auto d-block book-detail">
										</div>
										<div class="col-lg-6">
											<div class="text-box">
												<form th:action="#" method="POST">	
													書籍名：<span th:text="${bookBorrowing.book.title}"></span><br>
													所有者：<span th:text="${bookBorrowing.lendUser.name}">さん</span><br>
													レンタル希望期間：<span th:text="${bookBorrowing.deadline}">まで</span><br>
													ステータス：<span th:text="${bookBorrowing.getBookLendingStatus()}"></span>
													<input type="hidden" th:value="${bookBorrowing.bookLendingId}" name="bookLendingId">
													<input type="hidden" th:value="${bookBorrowing.book.id}" name="bookId">
													<div><button class="btn btn-primary btn-sm" type="submit">もう一度借りる</button></div>
												</form>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="tab-pane" id="lending-list">
						<!-- 貸した本 -->
						<div class="pt-3 pb-3 mt-4 mb-4 border-bottom">
							<div th:if="${lentList.size()}==0"><p class="text-center">貸した本はありません</p></div>
								<div class="mt-3 mb-3" th:each="bookLending:${lentList}">
									<div class="row">
										<div class="col-lg-6">
											<img th:src="@{${bookLending.book.thumbnailPath}}" 
												class="rounded img-fluid mx-auto d-block book-detail">
										</div>
										<div class="col-lg-6">
											<div class="text-box">
												書籍名：<span th:text="${bookLending.book.title}"></span><br>
												レンタル希望者：<span th:text="${bookLending.borrowUser.name}">さん</span><br>
												レンタル希望期間：<span th:text="${bookLending.deadline}">まで</span><br>
												ステータス：<span th:text="${bookLending.getBookLendingStatus()}"></span>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

		</div>
	</div>
</div>
	<script	src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="../static/js/bootstrap.js" th:src="@{/js/bootstrap.js}"></script>
</body>
</html>