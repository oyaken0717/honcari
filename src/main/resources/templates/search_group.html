<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<link href="../static/css/bootstrap.css" th:href="@{/css/bootstrap.css}" rel="stylesheet">
	<link rel="stylesheet" href="../static/css/style.css" th:href="@{/css/style.css}">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="https://ajaxzip3.github.io/ajaxzip3.js" charset="UTF-8"></script>
	<script src="../static/js/bootstrap.min.js" th:src="@{/js/bootstrap.min.js}"></script>
</head>
<body>
<script type="text/javascript">
	$(function(){
		var groupList;
		
		$("#group-button").on("click", function(){
			var searchName = $('#group-name').val();
			var url = 'http://localhost:8080/search_group';
			$.ajax({
				url : url,
				type : 'GET',
				dataType : 'json',
				data : {
					name : searchName
				},
				async : true
			})
			  .done(function(jsonGroupList){
				groupList = jsonGroupList;
				console.log(groupList);
				showGroupList(groupList);
			})
			.fail(function() {
		        console.log('失敗');
		    })
		    .always(function() {
		    });		
		})
		
		function showGroupList(){
			var groupHtml = "";
			for(let i = 0; i < groupList.length; i++){
				let group =  groupList[i];
				groupHtml += '<div>グループ名：<a href="/show_group_detail?id='+group.id+'">'+group.name+'</a><br>グループについて:'+group.description+'</div><hr>'
			}
			$('#group').html(groupHtml);
		}
	})
</script>
<nav th:replace="header::frag_header"></nav>
<header>
	<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
		<div class="add-book-top">
			<p class="add-book-theme">Find Your Group</p>
			<div class="search-book-for-add">
	    		<input id="group-name" type="text" name="book-name" placeholder="group name">	　　
				<button id="group-button" class="lead">Search</button>
			</div>
		</div>
		<div id="group"></div>
	</div>
</header>
	<script	src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="../static/js/bootstrap.js" th:src="@{/js/bootstrap.js}"></script>
</body>
</html>